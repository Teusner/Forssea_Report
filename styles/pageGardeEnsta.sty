%
% page de garde de support de cours/rapport
% il est possible de renseigner les champs suivants :
% \title, \author, \date, \promo, \doctype, \etablissement
% le logo (logo_ensieta_vectoriel) doit etre present
%

\def\option@titlepage{\relax} 
\gdef\@lenumero{}

\RequirePackage{graphicx}
\RequirePackage{tikz}

\definecolor{WetAsphalt}{RGB}{52, 73, 94}
\definecolor{BelizeHole}{RGB}{41, 128, 185}
\definecolor{SunFlower}{RGB}{241, 196, 15}

% quelques macros permettant d'initialiser les variables
\newcommand{\promo}[1]{\def\@nopromo{#1}}
\newcommand{\doctype}[1]{\def\@typedocument{#1}}
\newcommand{\laboratoire}[1]{\def\@laboratoire{#1}}
\newcommand{\entreprise}[1]{\def\@entreprise{#1}}
\newcommand{\logoEntreprise}[1]{\def\@logoEntreprise{#1}}
\newcommand{\logoLaboratoire}[1]{\def\@logoLaboratoire{#1}}
\newcommand{\encadrantEntreprise}[1]{\def\@encadrantEntreprise{#1}}
\newcommand{\encadrantLaboratoire}[1]{\def\@encadrantLaboratoire{#1}}

% valeurs par defaut des variables
\def\@nopromo{}
\def\@typedocument{}
\def\@etablissement{}
\def\@entreprise{}
\def\@laboratoire{}
\def\@logoEntreprise{}
\def\@logoLaboratoire{}
\def\@encadrantEntreprise{}
\def\@encadrantLaboratoire{}

% redefinition de la page de garde
\def\maketitle{
	\begin{titlepage}
		% definition d'une boite contenant le logo
		\vbox to \vsize{
			\begin{center}%
				\vskip-1cm
				\hbox{
					\vbox{
						\begin{tikzpicture}
							\filldraw[SunFlower] (0cm,0cm) -- (0cm,4.2cm) -- (4.2cm,4.2cm) -- (4.2cm,0cm) -- cycle;
							\filldraw[BelizeHole] (0cm,4.5cm) -- (0cm,8.7cm) -- (4.2cm,8.7cm) -- (4.2cm,4.5cm) -- cycle;
							\filldraw[WetAsphalt] (0cm,9cm) -- (0cm,13.2cm) -- (4.2cm,13.2cm) -- (4.2cm,9cm) -- cycle;
							\node[white, text width=4cm] at (2.1cm,11.1cm) {\small \@entreprise};

							\filldraw[white] (4.5cm,0cm) -- (4.5cm,4.2cm) -- (8.7cm,4.2cm) -- (8.7cm,0cm) -- cycle;
							\filldraw[white] (4.5cm,9cm) -- (4.5cm,13.2cm) -- (8.7cm,13.2cm) -- (8.7cm,9cm) -- cycle;

							\draw (6.6cm,2.1cm) node {\@logoLaboratoire};
							\filldraw[WetAsphalt] (4.5cm,4.5cm) -- (4.5cm,8.7cm) -- (8.7cm,8.7cm) -- (8.7cm,4.5cm) -- cycle;
							\node[white] at (6.6cm,6.6cm) {\vbox {\center{\large\begin{minipage}{4cm}
												\center{\bf\@typedocument\vskip3mm \@nopromo} \vskip3mm \@date\end{minipage}}}};
							\draw (6.6cm,11.1cm) node {\@logoEntreprise};

							\filldraw[WetAsphalt] (9cm,0cm) -- (9cm,4.2cm) -- (13.2cm,4.2cm) -- (13.2cm,0cm) -- cycle;
							\filldraw[SunFlower] (9cm,4.5cm) -- (9cm,8.7cm) -- (13.2cm,8.7cm) -- (13.2cm,4.5cm) -- cycle;
							\filldraw[BelizeHole] (9cm,9cm) -- (9cm,13.2cm) -- (13.2cm,13.2cm) -- (13.2cm,9cm) -- cycle;
							\node[white, text width=4cm] at (11.1cm,2.3cm) {\small \@laboratoire};
						\end{tikzpicture}
					}
				}
			\end{center}

			\vskip1em

			\begin{center}
				{\Huge\bf \@title \par}
			\end{center}

			\vskip 1em
			\begin{center}
				{\large\lineskip .75em \bf \@author \par}
			\end{center}

			\vskip 1em
			\begin{center}
				{\small\lineskip .75em \bf \@encadrantLaboratoire \par}
			\end{center}

			\vskip 1em
			\begin{center}
				{\small\lineskip .75em \bf \@encadrantEntreprise \par}
			\end{center}

			\vfill
		}
	\end{titlepage}
}

